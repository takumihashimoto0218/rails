<div class="nav d-flex flex-row justify-content-end p-3">
  <% if @profile %>
    <%= link_to "いいね一覧", user_favorites_path(@profile.user), class: "btn  mx-2" %>
    <%= link_to "いいねしたタスク一覧", user_task_favorites_path(@profile.user), class: "btn  mx-2"%>
    <%= link_to "編集", edit_profile_path, class: "btn  mx-2"%>
    <%= link_to "戻る", (request.referer || boards_path), class: "btn  mx-2"%>
  <% end %>
</div>

<div class="position-relative h-100">
  <div class="container-fluid">
    <div class="row">
      <div class="container-fluid">
        <div class="row h-100">
          <div class="col-12">
            <div class="p-2 p-md-4 text-black rounded bg-light shadow text-center">
              <div class="px-0">
                <div class="d-flex justify-content-center align-items-center mb-3">
                  <h4 class="mb-4">マイページ</h4>
                </div>

                <% if @profile.nil? %>
                  <p class="mb-3"><%= current_user.email %></p>
                  <%= link_to "プロフィールを登録する", new_profile_path, class: "btn  mt-3" %>
                <% else %>
                  <div class="mb-3">
                    <p class="mb-1"><%= @profile.name %></p>
                    <p class="mb-1 text-muted"><%= @profile.user.email %></p>
                  </div>

                  <div class="mb-3">
                    <% if @profile.profile_image.attached? %>
                      <%= image_tag @profile.profile_image.variant(resize: "100x100"), class: "mb-3" %>
                    <% else %>
                      <%= image_tag "default_profile.webp", :size => "100x100", class: "mb-3" %>
                    <% end %>
                  </div>

                  <div class="text-center">
                    <p class="lead my-3"><%= @profile.self_introduction %></p>
                    <%= @profile.user.boards.count %>個のボード
                  </div>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
        <div class="row mt-5">
          <% if @profile %>
            <% @boards.each do |board| %>
              <div class="col-lg-3 col-md-6 mb-4">
                <div class="common-card shadow bg-light fixed-height-board pt-3 pb-4">
                  <%= link_to board_path(board, page: params[:page]), class: "card-link" do %>
                    <div class="card-body text-center">
                      <h5 class="card-title text-dark"><%= board.title %></h5>
                    </div>
                  <% end %>
                </div>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
      <div class="d-flex justify-content-center mt-4">
        <div class="btn-white text-black">
          <%= custom_pagy_nav(@pagy) %>
        </div>
      </div>
    </div>
  </div>
</div>
