<div class="position-relative h-100">
  <div class="container-fluid">
    <div class="row">
      <div class="container-fluid">
        <div class="row h-100">
          <nav class="col-2 d-none d-md-block bg-light sidebar">
            <div class="sidebar-sticky">
              <ul class="nav flex-column">
                <% if @profile %>
                  <li class="nav-item">
                    <%= link_to new_board_path, class: "nav-link text-dark" do %>
                      <span data-feather="plus-circle"></span>ボードを投稿する
                    <% end %>
                  </li>
                  <li class="nav-item">
                    <%= link_to edit_profile_path, class: "nav-link text-dark" do %>
                      <span data-feather="edit"></span>編集する
                    <% end %>
                  </li>
                  <li class="nav-item">
                    <%= link_to (request.referer || boards_path), class: "nav-link text-dark" do %>
                      <span data-feather="arrow-left"></span>戻る
                    <% end %>
                  </li>
                  <li class="nav-item">
                    <%= link_to user_favorites_path(@profile.user), class: "nav-link text-dark" do %>
                      <span data-feather="heart"></span>いいね一覧
                    <% end %>
                  </li>
                  <li class="nav-item">
                    <%= link_to user_task_favorites_path(@profile.user), class: "nav-link text-dark" do %>
                      <span data-feather="list"></span>いいねしたタスク一覧
                    <% end %>
                  </li>
                <% end %>
              </ul>
            </div>
          </nav>
          <div class="col-10">
            <div class="p-2 p-md-4 text-black rounded bg-light shadow text-center">
              <div class="px-0">
                <div class="d-flex justify-content-center align-items-center mb-3">
                  <h4 class="mb-4">マイページ</h4>
                </div>

                <% if @profile.nil? %>
                  <p class="mb-3"><%= current_user.email %></p>
                  <%= link_to "プロフィールを登録する", new_profile_path, class: "btn btn-primary mt-3" %>
                <% else %>
                  <div class="mb-3">
                    <p class="mb-1"><%= @profile.name %></p>
                    <p class="mb-1 text-muted"><%= @profile.user.email %></p>
                  </div>

                  <div class="mb-3">
                    <% if @profile.profile_image.attached? %>
                      <%= image_tag @profile.profile_image.variant(resize: "100x100"), class: "mb-3" %>
                    <% else %>
                      <%= image_tag "default_profile.webp", :size => "100x100", class: "mb-3" %>
                    <% end %>
                  </div>

                  <div class="text-center">
                    <p class="lead my-3"><%= @profile.self_introduction %></p>
                    <%= @profile.user.boards.count %>個のボード
                  </div>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
        <div class="row mt-5">
          <% if @profile %>
            <% @boards.each do |board| %>
              <div class="col-lg-3 col-md-6 mb-4">
                <div class="common-card shadow bg-light fixed-height-board pt-3 pb-4">
                  <%= link_to board_path(board, page: params[:page]), class: "card-link" do %>
                    <div class="card-body text-center">
                      <h5 class="card-title text-dark"><%= board.title %></h5>
                    </div>
                  <% end %>
                </div>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
      <div class="d-flex justify-content-center mt-4">
        <div class="btn-white text-black">
          <%= custom_pagy_nav(@pagy) %>
        </div>
      </div>
    </div>
  </div>
</div>
