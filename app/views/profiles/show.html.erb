<div class="position-relative">
  <div class="jumbotron p-2 p-md-4 text-black rounded bg-light shadow text-center w-70">
    <div class="col-md-6 px-0">
      <div class="d-flex justify-content-center align-items-center mb-3">
        <h4 class="mb-0">マイページ</h4>
      </div>
      <% if @profile.nil? %>
        <p class="mb-3"><%= current_user.email %></p>
        <%= link_to "プロフィールを登録する", new_profile_path, class: "btn btn-primary mt-3" %>
        <%= link_to "ボードを投稿する", new_board_path, class: "btn btn-warning mt-3" %>
      <% else %>
        <div class="mb-3">
          <p class="mb-1"><%= @profile.name %></p>
          <p class="mb-1 text-muted"><%= @profile.user.email %></p>
        </div>
        <div class="mb-3">
          <% if @profile.profile_image.attached? %>
            <%= image_tag @profile.profile_image.variant(resize: "100x100"), class: "mb-3" %>
          <% else %>
            <%= image_tag "default_profile.webp", :size => "100x100", class: "mb-3" %>
          <% end %>
        </div>
        <div>
          <p class="lead my-3"><%= @profile.self_introduction %></p>
          <%= @profile.user.boards.count %>個のボード
        </div>
        <div>
          <%= link_to "ボードを投稿する", new_board_path, class: "btn btn-warning mt-3" %>
        </div>
      <% end %>
    </div>
    <div class="text-end">
      <% if @profile %>
        <%= link_to "編集する", edit_profile_path, class: "btn btn-warning mr-2" %>
      <% end %>
      <%= link_to "戻る", request.referer || boards_path, class: "btn btn-warning" %>
    </div>
  </div>
</div>

<div class="row mt-5">
  <% if @profile %>
    <% @boards.each do |board| %>
      <div class="col-lg-3 col-md-6 mb-4">
        <div class="common-card shadow bg-light fixed-height-board pt-3 pb-4">
          <div class="card-body text-center">
            <h5 class="card-title"><%= board.title %></h5>
            <%= link_to "詳細", board_path(board, page: params[:page]), class: "btn btn-primary mt-2" %>
          </div>
        </div>
      </div>
    <% end %>
    <div class="d-flex justify-content-center mt-4">
      <div class="btn-white text-black">
        <%= custom_pagy_nav(@pagy) %>
      </div>
    </div>
  <% end %>
</div>

